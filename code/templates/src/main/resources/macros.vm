

#macro(ESC_HTML $txt)#if($txt)$stringUtils.escapeHtml($txt)#end#end

#macro(ESC_JS $txt)
	#if($txt)
	$stringUtils.escapeJS($txt)
	#end
#end

#macro(DDZ_SHORT_URL $shorten)
	#if($shorten)
		${env.ddzRoot}/s/$!shorten
	#end
#end

#macro(DDZ_ITEM_URL $itemId)
	#if($itemId)
		${env.ddzRoot}/zhe/item/$!itemId
	#end
#end

#macro(SEARCH_URL $newQuery)
    #set($combineQuery = $stringUtils.combineQueryArray($searchQuery,$newQuery))
	#set($_outputUrl = $searchUrl)
	#foreach($entry in $combineQuery)
		#set($entry_value = $entry.value)
		#if(!$entry_value)
			#set($entry_value  = "")
		#end
		#if($velocityCount == 1)
			#set($_outputUrl = $_outputUrl + $!entry.key + "=" + $entry_value)
		#else
			#set($_outputUrl = $_outputUrl + "&" + $!entry.key + "=" + $entry_value)
		#end
	#end
	#if($mark)
		#set($_outputUrl = $_outputUrl + "&mark="+$mark)
	#end
	$_outputUrl
#end